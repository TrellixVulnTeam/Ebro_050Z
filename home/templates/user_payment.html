{% extends 'user dashboard/user_dashboard.html'%}

{% block content %}

{% load static %}

<!-- <style>
	.active_user_page3{
		background-color: #99c2ff;
	}
</style> -->
  

		<div class="col-xs-4">
			<h2 class="sub_headings">&nbsp;Delivery Address</h2>
			<br><br>
				{% csrf_token %}
			<table  cellspacing="0" style="margin-left: 10px;width: 100%;font-size: 13px;font-family: 'Antonio', sans-serif;font-family: 'Ubuntu', sans-serif;">
      			<tr style="height: 30px;">
      	 		<td width="30%">First Name</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.first_name }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">Last Name</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.last_name }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">Country</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.country }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">State</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.state }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">District</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.district }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">Postal Code</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.postalcode }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">Phone</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.phone }}</b></td>
      	 		</tr>
      	 		<tr style="height: 30px;">
      	 		<td width="30%">Alternative Phone</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.alternative_phone }}</b></td>
      	 		</tr>
      	 		<tr style="height: 60px;">
         		<td width="30%">Address Line 1</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.address_line_1 }}</b></td>
         		</tr>
         		<tr style="height: 60px;">
         		<td width="30%">Address Line 2</td><td width="70%">&nbsp;&nbsp;<b>{{ user_delivery_address.address_line_2 }}</b></td>
         		</tr>
   			</table>
		</div>







		<div class="col-xs-5 user_checkout_box" style="margin-left: 450px;margin-top: -400px;">
         <h2 class="sub_headings">Select Payment Methode:</h2><br><br>
			<h2 class="sub_headings">Total</h2><br><br>
				<div class="row col-md-10" style="margin-left: -25px;">
					<h2 class="btn3 btn3-2">Items</h2><br>
					<h2 class="btn3 btn3-2">Sub-Total</h2><br><br>
               <h2 class="btn3 btn3-2">Wallet</h2>


				</div>

				<div class="row col-md-2">
					<h4 class="btn3 btn3-2">:{{cart_count}}</h4><br>
					<h3 class="btn3 btn3-2">:$&nbsp;&nbsp;{{total_price}}</h3><br><br>
               <h3 class="btn3 btn3-2">:$&nbsp;&nbsp;$&nbsp;{{user_profile.wallet}}</h3>
				</div>

            <form action="{% url 'ordercomplete_wallet' %}" method="POST">
               {% csrf_token %}
               <button href="checkout" class="btn2 btn2-2 btn2-sep" style="width: 100%;">Pay From Wallet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
            </form>
            <br>
            <div id="paypal-button-container" style="height: auto;"></div>




			</div>

		</div> 



		
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


   <script src="https://www.paypal.com/sdk/js?client-id=AQdQhGUrIJcXkKG6zTEByoFMgengiCqBmne1vf_aokXSkqM8IF-SCPmJ2cCqV7xdVbztz1E5MkRzZKUU&currency=USD&disable-funding=credit"></script>


       <script>





         var total_price = '{{total_price}}'

        // Render the PayPal button into #paypal-button-container
        paypal.Buttons({
         style: {
                color:  'blue',
                shape:  'rect',
                label:  'pay',
                height: 40
            },


            // Set up the transaction
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: total_price
                        }
                    }]
                });
            },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    // Show a success message to the buyer
                    window.location.href = "{% url 'ordercomplete' %}";
                    alert('Transaction completed by ' + details.payer.name.given_name + '!');
                });
            }


        }).render('#paypal-button-container');
    </script>

{% endblock %}
