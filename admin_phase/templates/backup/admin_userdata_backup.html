
{% extends 'admin dashboard/admin_dashboard.html'%}

{% block content %}

{% load static %}



<style>
   .active_user_page6{
      background-color: #99c2ff;
   }

</style>





<div class="container_wideboxes">
  <div class="col-md-12 table_userdata">

    <div class="col-md-4 table1_userdata">
        <table cellspacing="0">
          <tr class="header"> 
            <th width="20%"></th>
            <th width="20%"></th>
            <th width="20%">Online</th>
            <th width="20%">Offline</th>
            <th width="20%">Total</th>
          </tr>
          <tr>
            <th rowspan="2" width="20%">Admins</th>
            <td width="20%">Super</td>
            <td width="20%"><center>###</center></td>
            <td width="20%"><center>###</center></td>
            <td rowspan="2" width="20%"><center>{{ total_admins }}</center></td>
          </tr>
          <tr>      
          <td width="20%">Normal</td>
          <td width="20%"><center>###</center></td>
          <td width="20%"><center>###</center></td>
          <td width="20%"><center></center></td>
          </tr>
          <tr>      
          <th rowspan="2" width="20%">Users</th>
          <td width="20%">Free</td>
          <td width="20%"><center>###</center></td>
          <td width="20%"><center>###</center></td>
          <td rowspan="2" width="20%"><center>{{ total_users }}</center></td>
          </tr>
          <tr>       
          <td width="20%">Premium</td>
          <td width="20%"><center>###</center></td>
          <td width="20%"><center>###</center></td>
          </tr>
          <tr>      
          <td colspan="4" width="20%"></td>
          <td width="20%"><center><b>{{ total_registrations }}</b></center></td>
          </tr>
        </table>

    </div>

    <div class="col-md-5 table2_userdata">
        <table cellspacing="0">
          <tr class="header">
            <th width="10%"></th>
            <th width="10%"></th>
            <th width="20%">Deals</th>
            <th width="20%">Jobs</th>
            <th width="20%">Proucts</th>
          </tr>
          <tr>
            <th rowspan="2" width="10%">Admin</th>
            <td width="10%">Public</td>
            <td width="20%">&nbsp;{{ public_admin_deals }}</td>
            <td width="20%">&nbsp;{{ public_admin_jobs }}</td>
            <td width="20%">&nbsp;{{ public_admin_products }}</td>  
          </tr>
          <tr>  
            <td width="10%">Private</td>
            <td width="20%">&nbsp;{{ private_admin_deals }}</td>
            <td width="20%">&nbsp;{{ private_admin_jobs }}</td>
            <td width="20%">&nbsp;{{ private_admin_products }}</td>  
          </tr>
          <tr>
            <th rowspan="2" width="10%">User</th>
            <td width="10%">Public</td>
            <td width="20%">&nbsp;{{ public_user_deals }}</td>
            <td width="20%">&nbsp;{{ public_user_jobs }}</td>
            <td width="20%">&nbsp;{{ public_user_products }}</td>     
          </tr>
          <tr> 
            <td width="10%">Private</td>
            <td width="20%">&nbsp;{{ private_user_deals }}</td>
            <td width="20%">&nbsp;{{ private_user_jobs }}</td>
            <td width="20%">&nbsp;{{ private_user_products }}</td>
          </tr>
          <tr>  
            <td width="10%"><b>Total</b></td>
            <td width="10%"><b></b></td>
            <td width="20%"><b>&nbsp;{{ total_deals }}</b></td>
            <td width="20%"><b>&nbsp;{{ total_jobs }}</b></td>
            <td width="20%"><b>&nbsp;{{ total_products }}</b></td>
          </tr>
        </table>
    </div>

    <div class="col-md-3 table3_userdata">
        <table cellspacing="0">
          <tr class="header">
            <th width="40%"></th>
            <th width="30%">Deals</th>
            <th width="30%">Jobs</th>
          </tr>
          <tr>   
            <td width="40%">Admin</td>
            <td width="30%">&nbsp;{{ admin_assigned_deal }}</td>
            <td width="30%">&nbsp;{{ admin_assigned_job }}</td>
          </tr>
          <tr>
            <td width="40%">User</td>
            <td width="30%">&nbsp;{{ user_assigned_deal }}</td>
            <td width="30%">&nbsp;{{ user_assigned_job }}</td>
          </tr>
          <tr>    
            <th width="40%">Total</th>
            <td width="30%"><b>&nbsp;{{ total_assigned_deal }}</b></td>
            <td width="30%"><b>&nbsp;{{ total_assigned_job }}</b></td>  
          </tr>
        </table>
    </div>

  </div>
</div>









  
    <div id="colorlib-reservation">
      <div class="container_wideboxes">
        <div class="row">
          <div class="col-md-12 search-wrap">
            <form class="colorlib-form">
                    <div class="row">
                    <div class="col-md-4">
                      <div class="form-group">

                          <label for="date">Who:</label>
                          <div class="form-field" style="margin-top: -10px;">
                            <i class="icon icon-text"></i>
                            <input name="search" type="textfield" id="date" class="form-control text" placeholder="username,first name,tittle,etc">
                          </div>
                        </div>
                      </div>
                      
                      <div class="col-md-2">
                      <div class="form-group">
                        <label for="adults">Type:</label>
                        <div class="form-field">
                          <i class="icon icon-arrow-down3"></i>
                          <select name="user_type" id="people" class="form-control">
                            <option value="">------------</option>
                            <option value="free">Free User</option>
                            <option value="premium">Premium User</option>
                            <option value="">Admin</option>
                            <option value="">Super Admin</option>
                          </select>
                        </div>
                      </div>
                    </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="date">Where:</label>
                          <div class="form-field" style="margin-top: -10px;">
                            <i class="icon location"></i>
                            <input type="textfield" name="location" id="date" class="form-control text" placeholder="city,state, or Country">
                          </div>
                        </div>
                      </div>
                      
                      <div class="col-md-2" style="margin-top: -10px;">
                        <button type="submit" name="submit" id="submit"  class="btn btn-primary btn-block">Search</button>
                      </div>        
                    </div>
                  </div>
                </form>
            </div>      
      </div>








<div class="container_wideboxes">
  <div class="col-md-4">
    <div class="col-md-12 category_box">

      <form class="text-center border border-light p-5" action="{% url 'add_category' %}" method="POST" onsubmit="return check()">
        {% csrf_token %}
          <p class="h4 mb-4">Add Job Category</p>

        <!-- Main Categoy-->
         <div class="d-flex justify-content-around">
              
          <!-- Default inline 1-->
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" checked="checked" value="True" onclick="checkRadio(name)" name="main_category" class="custom-control-input" id="defaultInline1" >
            <label class="custom-control-label" for="defaultInline1">Main Category</label>
          </div>

          <!-- Default inline 2-->
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" class="custom-control-input" onclick="checkRadio(name)" value="False" id="defaultInline2" name="main_category_availabe">
            <label class="custom-control-label" for="defaultInline2">Sub Category</label>
          </div>
              
          </div>
          <!-- Password -->
          <input type="text" name="name"  class="form-control mb-4" placeholder="Enter category name" required="" pattern="[A-Za-z ]{1,30}">
          <select id="sub_selection" name="sub_category" class="form-control mb-4" >
              <option value="">select main category</option>
              {% for category in main_category_list %}
                <option value="{{ category.id }}">{{ category.name }} &nbsp;&nbsp;&nbsp;{% if category.parent == null %}<p class="text-primary">(main category)</p>{% endif %}</option> 
              {% endfor %}
          </select>
          <div id="error" style="color: red"></div>
          <button style="background-color: #59698d;" class="btn btn-primary btn-block" type="submit">Save</button>
      </form>

    </div>

    <div class="col-md-12 category_box">
      <table cellspacing="0" style="width: 108%;margin: 0px -15px;">
        <tr class="header" style="font-size: 15px;">
          <center>
           <th width="5%"><center>#</center></th>
           <th width="50%"><center>Category</center></th>
           <th width="45%"><center>Sub Category</center></th>
           </center>
        </tr>


        {% for i in main_category_list %}
          <tr style="font-size: 13px;height: 30px;cursor: pointer;" onclick="location.href='{% url 'detail_category' i.id %}';">
           <td><center>{{ forloop.counter }}</center></td>
            <td>&nbsp;{{ i.name }}</td>
            <td>
              {% for j in sub_category_list %}
                {% if j.parent_id == i.id %}
                &nbsp;{{ j.name }}<br>
                {% endif %}
              {% endfor %}
            </td>
          </tr>
        {% endfor %}  
      </table>
    </div>

  </div>

  <div class="col-md-8">
    <div class="col-md-12 userlist_box">
      <a href="#"><h3 id="addbutton" class="adduser">+&nbsp;Add&nbsp;User</h3></a><br>
      <div class="scrollit">
        <table cellspacing="0" class="user_list_table">
          <tr class="header" style="font-size: 15px;">
            <center>
             <th width="2%"><center>#</center></th>
             <th width="2%"><center></center></th>
             <th width="25%"><center>Username</center></th>
             <th width="20%" class="none"><center>Phone</center></th>
             <th width="15%" class="none"><center>Profession</center></th>
             <th width="10%" class="none"><center>Location</center></th>
             <th width="11%" class="none"><center>Type</center></th>
             <th width="5%" class="none"><center>Refferals</center></th>
             <th width="5%"><center>Wallet</center></th>
             <th width="5%"><center>Coins</center></th>
             </center>
          </tr>


          {% for i in profile_list %}
            <tr style="font-size: 13px;cursor: pointer;" onclick="location.href='{% url 'detail_user' i.id %}';">
             <td><center>{{ forloop.counter }}</center></td>
             <td><center>
              {% if i.image != '' %}
              <img src="{{i.image.url}}" alt="" height="30" width="30"/>
              {% else %}
              <img src="{% static 'images/assign.png' %}" alt="" height="30" width="30"/>
              {% endif %}
             </center></td>
             <td>&nbsp;{{ i.username.username }}</td>
             <td class="none">&nbsp;{{ i.phone }}</td>
             <td class="none"><center>{{ i.profession }}</center></td>
             <td class="none">&nbsp;{{ i.location }}</td>
             <td class="none"><center>{% if i.username.is_superuser == True %}<font color="red"> Admin </font> {% elif i.usertype == "premium" %} Premium User {% else %} Free User {% endif %}</center></td>
             <td class="none"><center>{{ i.myrefferalcount }}</center></td>
             <td><center>{{ i.wallet }}</center></td>
             <td><center>{{ i.coins }}</center></td>
            </tr>
          {% endfor %}  
        </table>
      </div>
    </div>

  </div>
</div>








<div class="container_wideboxes">
  <div class="col-md-12 adduser-form">
     <form action="{% url 'add_user' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
      <div class="col-md-4">
        <img src="{% static 'images/close.png '%}" alt="" height="30" width="20" class="closeuser">

        <div class="form-field col-md-12 deals-pic-circle">
          <img src="{% static 'images/menu-9.jpg '%}" id="file-ip-1-preview">   
          <input type="file" name="picture" id="file-ip-1" accept="image/*" onchange="showPreview(event);">
          <label for="file-ip-1" id="uploadBtn">Choose Photo</label>        
        </div>
        <br><br><br><br><br><br><br><br><br><br>

          <div class="col-md-12">
            <label for="fname">First Name</label>
            <input type="text" name="first_name" id="fname" class="form-control" placeholder="Your firstname" required="">
          </div>
          <div class="col-md-12">
            <label for="lname">Last Name</label>
            <input type="text" name="last_name" id="lname" class="form-control" placeholder="Your lastname">
          </div>
          <div class="col-md-12">
            <label for="lname">Email</label>
            <input type="email" name="email" id="lname" class="form-control" placeholder="Your email id" required="">
          </div>
          <div class="col-md-12">
            <label for="lname">Phone number</label>
            <input type="text" name="phone" id="lname" class="form-control" placeholder="Your phone number" required="">
          </div>
          <div class="col-md-12">
            <label for="lname">Refferal Code</label>
            <input type="text" name="refferalcode" id="lname" class="form-control" placeholder="reffereal code">
          </div>
          <div class="col-md-12">
            <label for="lname">Password</label>
            <input type="password" name="password1" id="lname" class="form-control" placeholder="Your password" required="">
          </div>
          <div class="col-md-12">
            <label for="lname">Confirm Passwordr</label>
            <input type="password" name="password2" id="lname" class="form-control" placeholder="Confirm your password" required="">
          </div>
      </div>
      <div class="col-md-8">
          <br>
          <div class="col-md-12">
            <label for="subject">Type</label>
          </div>
          <div class="col-md-12">
            <input type="radio" name="user_type" value="free" checked="checked">Free User&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="radio" name="user_type" value="premium">Premium User&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="radio" name="user_type" value="admin">Admin
          </div>
          <div class="col-md-12">
            <label for="subject">Alternative Phone</label>
            <input type="text" name="alternative_phone" id="subject" class="form-control" placeholder="Secondary phone number">
          </div>
          <div class="col-md-12">
            <label for="email">Date of Birth</label>
            <input type="text" name="dob" id="email" class="form-control" placeholder="Your date of birth">
          </div>
          <div class="col-md-12">
            <label for="subject">Adhar Id</label>
            <input type="text" name="adhar_id" id="subject" class="form-control" placeholder="Your adhar id">
          </div>
          <div class="col-md-12">
            <label for="subject">Profession</label>
            <input type="text" name="profession" id="subject" class="form-control" placeholder="Your profession/job">
          </div>
          <div class="col-md-12">
            <label for="subject">Location</label>
            <input type="text" name="location" id="subject" class="form-control" placeholder="Your location">
          </div>
          <div class="col-md-12">
            <label for="subject">Qualification</label>
            <input type="text" name="qualification" id="subject" class="form-control" placeholder="Your qualification">
          </div>
          <div class="col-md-12">
            <label for="subject">Hobbies</label>
            <input type="text" name="hobbies" id="subject" class="form-control" placeholder="Your hobbies">
          </div>

          <div class="col-md-12">
            <label for="message">Summary/Bio</label>
            <textarea  name="summary" value="" id="message" cols="25" rows="2" class="form-control" placeholder="Say something about you">
            </textarea>
          </div>
          &nbsp;&nbsp;
          <div class="row form-group">
          <div class="form-group text-center"><br><br>
            <button type="submit" value="Add Deal" class="btn btn-primary">Add User</button>
        
          </div>
          </div>
      </div>
    </form>
  </div>
</div>

    



    <script>
    document.getElementById("addbutton").addEventListener("click",function(){
      document.querySelector(".adduser-form").style.display = "flex";
    })
    document.querySelector(".closeuser").addEventListener("click",function(){
      document.querySelector(".adduser-form").style.display = "none";
     })
    </script>



    <script type="text/javascript">
      document.getElementById("sub_selection").style.visibility = "hidden";
      var ch;
    function checkRadio(name) {
        if(name == "main_category_availabe"){
            document.getElementById("defaultInline2").checked = true;
            document.getElementById("defaultInline1").checked = false;
            console.log(document.getElementById("defaultInline1").value)
            console.log('Yes')
            document.getElementById("sub_selection").style.visibility = "visible";
            ch=1;



        } else if (name == "main_category"){
            document.getElementById("defaultInline1").checked = true;
            document.getElementById("defaultInline2").checked = false;
            document.getElementById("sub_selection").style.visibility = "hidden";
        }
    }

    function check()
    {     z=document.getElementById("defaultInline2").value;
            x=document.getElementById("sub_selection").value;
    // alert(ch)
    if(ch)
    {
      // alert("rad")
      if(x == "")
    {
      // alert("not ")
      document.getElementById("error").innerHTML="choose sub category"; 
      return false;
    }else{
      // alet("sc")
      return true;

    }
    }else{
      // alert("else part")
      console.log("sdf")
    }

    }
    </script>



{% endblock %}